:where(progress) {
  --_accent-color: var(--primary);
  --_bg-color: var(--surface-tonal);

  appearance: none;
  background-color: var(--_bg-color);
  border-radius: var(--border-radius);
  border: 0;
  display: inline-block;
  height: var(--size-2);
  overflow: hidden;
  position: relative;
  vertical-align: baseline;
  width: 100%;

  &::-webkit-progress-bar {
    border-radius: var(--border-radius);
    background: none;
  }

  &[value]::-webkit-progress-value {
    background-color: var(--_accent-color);

    @media (prefers-reduced-motion: no-preference) {
      transition: inline-size 0.2s var(--ease-out-4);
    }
  }

  &::-moz-progress-bar {
    background-color: var(--_accent-color);
  }
}

@media (prefers-reduced-motion: no-preference) {
  progress:indeterminate {
    background-color: var(--_bg-color);

    &::after {
      animation: indeterminate 2s linear infinite;
      background-color: var(--_accent-color);
      content: "";
      inset: 0 auto 0 0;
      position: absolute;
      will-change: inset-inline-start, inset-inline-end;
    }

    &[value]::-webkit-progress-value {
      background-color: transparent;
    }

    &::-moz-progress-bar {
      background-color: transparent;
    }
  }
}

[dir="rtl"] {
  @media (prefers-reduced-motion: no-preference) {
    :where(progress):indeterminate {
      animation-direction: reverse;
    }
  }
}

[dir="rtl"] {
  @media (prefers-reduced-motion: no-preference) {
    :where(progress):indeterminate::after {
      animation-direction: reverse;
    }
  }
}

@keyframes indeterminate {
  0% {
    left: -200%;
    right: 100%;
  }
  60% {
    left: 107%;
    right: -8%;
  }
  100% {
    left: 107%;
    right: -8%;
  }
}
