:where(select.field) {
  line-height: var(--font-lineheight-2);
  padding: 0;
  position: relative;

  /* Default arrow */
  &:after {
    display: none;
  }

  /* Select popover */
  &::picker(select) {
    border: 0;
    box-shadow: var(--shadow-2);
    padding: 0;
    transition:
      opacity 0.5s var(--ease-3),
      scale 0.2s var(--ease-3);
  }

  /* Animation start styles */
  &:not(:open)::picker(select) {
    opacity: 0;
    scale: 0.5;
  }

  /* Animation end styles */
  &:open::picker(select) {
    opacity: 1;
    scale: 1;
  }

  button {
    background-color: transparent;
    display: flex;
    inline-size: 100%;
    margin: 0;
    padding: var(--size-2) var(--size-8) var(--size-2) var(--size-3);
    position: relative;

    /* Arrow */
    &:after {
      block-size: 0;
      border-block-start: 5px solid;
      border-inline: 5px solid transparent;
      content: "";
      display: inline-block;
      flex-shrink: 0;
      inline-size: 0;
      inset-block-start: 50%;
      inset-inline-end: var(--size-3);
      position: absolute;
      translate: 0 -50%;
    }

    selectedoption {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  }

  .list {
    /* Groups */
    optgroup {
      padding-inline: 0;
      position: relative;

      &:before {
        background-color: light-dark(var(--gray-2), var(--gray-12));
        color: light-dark(
          color-mix(in oklch, var(--text-color-1) 75%, white),
          color-mix(in oklch, var(--text-color-1) 75%, black)
        );
        content: attr(label);
        cursor: default;
        display: block;
        font-size: var(--font-size-xs);
        font-weight: 500;
        inset-block-start: 0;
        inset-inline: 0;
        overflow: hidden;
        padding-block: var(--size-1);
        padding-inline: var(--size-2);
        position: absolute;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      &:not(:first-child) {
        margin-block-start: var(--size-2);
      }

      option:first-of-type {
        margin-block-start: var(--size-2);
      }

      option:last-of-type {
        margin-block-end: var(--size-2);
      }

      &:last-child {
        option:last-of-type {
          margin-block-end: 0;
        }
      }
    }

    /* Option */
    option {
      /* Checkmark */
      &:before {
        pointer-events: none;
      }

      &:focus-visible {
        outline-offset: -1px;
      }
    }
  }

  /* Size */
  &.small {
    button {
      padding-block: var(--size-1);
      padding-inline: var(--size-2) var(--size-7);

      &:after {
        inset-inline-end: var(--size-2);
      }
    }
  }
}
