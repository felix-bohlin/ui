:where(.select) {
  background-color: transparent;
  border-radius: var(--input-border-radius);
  border: var(--input-border-width) solid var(--input-border-color);
  font-family: var(--font-sans);
  font-size: var(--font-size-md, 1rem);
  line-height: var(--font-lineheight-3);
  min-inline-size: 0;
  padding: 0;
  position: relative;
  transition: all 0.15s var(--ease-2);

  /* Default arrow */
  &:after {
    display: none;
  }

  /* Select popover */
  &::picker(select) {
    border: 0;
    box-shadow: var(--shadow-2);
    padding: 0;
  }

  button {
    background-color: transparent;
    display: flex;
    inline-size: 100%;
    margin: 0;
    padding: var(--size-2) var(--size-8) var(--size-2) var(--size-3);
    position: relative;

    /* Arrow */
    &:after {
      block-size: 0;
      border-block-start: 5px solid;
      border-inline: 5px solid transparent;
      content: "";
      display: inline-block;
      flex-shrink: 0;
      inline-size: 0;
      position: absolute;
      translate: 0 -50%;
      inset-block-start: 50%;
      inset-inline-end: var(--size-3);
    }

    selectedoption {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  }

  .list {
    /* Groups */
    optgroup {
      padding-inline: 0;
      position: relative;

      &:before {
        background-color: light-dark(var(--gray-2), var(--gray-12));
        color: light-dark(
          color-mix(in oklch, var(--text-color-1) 75%, white),
          color-mix(in oklch, var(--text-color-1) 75%, black)
        );
        content: attr(label);
        cursor: default;
        display: block;
        font-size: var(--font-size-xs);
        font-weight: 500;
        inset-block-start: 0;
        inset-inline: 0;
        overflow: hidden;
        padding-block: var(--size-1);
        padding-inline: var(--size-2);
        position: absolute;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      &:not(:first-child) {
        margin-block-start: var(--size-2);
      }

      option:first-of-type {
        margin-block-start: var(--size-2);
      }

      option:last-of-type {
        margin-block-end: var(--size-2);
      }

      &:last-child {
        option:last-of-type {
          margin-block-end: 0;
        }
      }
    }

    /* Option */
    option {
      /* Checkmark */
      &:before {
        pointer-events: none;
      }

      &:focus-visible {
        outline-offset: -1px;
      }
    }
  }

  /* Size */
  &.small {
    button {
      padding-block: var(--size-1);
      padding-inline: var(--size-2) var(--size-7);

      &:after {
        inset-inline-end: var(--size-2);
      }
    }
  }

  /* Variants */
  &.filled {
    background-color: var(--surface-tonal);
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    border-block-end-color: var(--text-color-1);
    border-block-start-width: 0;
    border-inline-end-width: 0;
    border-inline-start-width: 0;

    &:before {
      background-color: var(--text-color-1);
      block-size: var(--input-border-width);
      content: "";
      inline-size: 100%;
      inset: auto 0 calc(0px - var(--input-border-width)) 0;
      position: absolute;
      transition: inset 0.2s var(--ease-3);
    }

    &:where(:not([disabled])) {
      &:hover {
        background-color: light-dark(
          color-mix(in oklch, var(--surface-tonal) 93%, black),
          color-mix(in oklch, var(--surface-tonal) 93%, white)
        );
        &:before {
          inset-block-end: 0;
        }
      }
    }
  }
}
